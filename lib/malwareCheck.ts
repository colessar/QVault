import axios from 'axios';

const scanFileWithVirusTotal = async (file: File): Promise<boolean> => {
    const url = 'https://www.virustotal.com/api/v3/files';
    const apiKey = 'YOUR_VIRUSTOTAL_API_KEY';

    const formData = new FormData();
    formData.append('file', file);

    const headers = {
        'x-apikey': apiKey,
        'Content-Type': 'multipart/form-data',
    };

    try {
        const response = await axios.post(url, formData, { headers });

        // Check if the scan was successful
        if (response.status === 200) {
            const data = response.data;

            // Check the scan results
            if (data.data.attributes.last_analysis_stats.malicious > 0) {
                console.log('File is malicious!');
                return false;
            } else {
                console.log('File is clean!');
                return true;
            }
        }
    } catch (error) {
        console.error('Error scanning the file:', error);
    }

    return false;
};